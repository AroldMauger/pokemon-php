<!DOCTYPE html>
<html>
<head>
    <title>POKEDEX</title>
    <!-- Inclure Bootstrap CSS via CDN -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/login.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <style>
        .display-message {
            position: fixed;
            top: 0;
            font-size: 20px;
            height: 4em;
        }
    </style>
</head>
<body>
<header>
    <img src="/logo.png" class="img-fluid my-4" id="logo" alt="Logo">
    <a href="/choice">Générations</a>
</header>
<main>

    <form class="form-container" action="/signup" method="POST">
        <h2>CRÉER UN COMPTE UTILISATEUR</h2>
        <div class="input-container">
            <label for="username">Nom utilisateur</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div class="input-container">
            <label for="password">Mot de passe</label>
            <input type="password" id="password" name="password" required pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@#$%^&+=!])(?!.*\s).{8,}$"  title="Min. 8 caractères dont minuscule, majuscule, chiffre et caractère spécial.">

        </div>
        <span id="password-error" class="error-message"></span>

        <div class="btn-container">
            <button id="signup-btn" type="submit">Créer</button>
        </div>
    </form>

    <form class="form-container" action="/choice" method="POST">
        <h2>SE CONNECTER</h2>
        <div class="input-container">
            <label for="log-user">Nom utilisateur</label>
            <input type="text" id="log-user" name="username" required>
        </div>
        <div class="input-container">
            <label for="log-password">Mot de passe</label>
            <input type="password" id="log-password" name="password" required>
        </div>
        <div class="btn-container">
            <button type="submit">Connexion</button>
        </div>
    </form>

</main>

<!-- Affichage des messages de succès ou d'erreur -->
{% if success_message %}
    <div class="display-message alert alert-success" role="alert">
        {{ success_message }}
    </div>
{% endif %}
{% if error_message %}
    <div class="display-message alert alert-danger" role="alert">
        {{ error_message }}
    </div>
{% endif %}

<!-- Inclure Bootstrap JS et dépendances via CDN -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Script pour faire disparaître le message après 3 secondes -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const message = document.querySelector('.display-message');
        if (message) {
            setTimeout(function() {
                message.style.opacity = 0;
                setTimeout(function() {
                    message.style.display = 'none';
                }, 500);
            }, 3000);
        }
    });
    const passwordInput = document.getElementById('password');
    const errorMessage = document.getElementById('password-error');
    const submitBtn = document.getElementById('signup-btn')
    // Fonction pour vérifier la validité du mot de passe
    function validatePassword() {
        if (!passwordInput.checkValidity()) {
            errorMessage.textContent = passwordInput.title;
        } else {
            errorMessage.textContent = '';
        }
    }

    submitBtn.addEventListener('click', validatePassword);


</script>
</body>
</html>
